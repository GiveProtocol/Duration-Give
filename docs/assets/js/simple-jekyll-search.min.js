/*!
 * Simple-Jekyll-Search
 * Copyright 2015-2020, Christian Fei
 * Licensed under the MIT License.
 */
!function(){"use strict";var f={compile:function(r){return i.template.replace(i.pattern,function(t,e){var n=i.middleware(e,r[e],i.template);return void 0!==n?n:r[e]||t})},setOptions:function(t){i.pattern=t.pattern||i.pattern,i.template=t.template||i.template,"function"==typeof t.middleware&&(i.middleware=t.middleware)}},i={};i.pattern=/\{(.*?)\}/g,i.template="",i.middleware=function(){};var n=function(t,e){var n=e.length,r=t.length;if(n<r)return!1;if(r===n)return t===e;t:for(var i=0,o=0;i<r;i++){for(var u=t.charCodeAt(i);o<n;)if(e.charCodeAt(o++)===u)continue t;return!1}return!0},e=new function(){this.matches=function(t,e){return n(e.toLowerCase(),t.toLowerCase())}},r=new function(){this.matches=function(e,t){return!!e&&(e=e.trim().toLowerCase(),(t=t.trim().toLowerCase()).split(" ").filter(function(t){return 0<t.length}).reduce(function(t,n){return t&&-1<e.indexOf(n)},!0))}},o={put:function(t){if(l(t))return p(t);if(function(t){return Boolean(t)&&"[object Array]"===Object.prototype.toString.call(t)}(t))return function(n){const r=[];s();for(let t=0,e=n.length;t<e;t++){let e=n[t];l(e)&&(e=p(e),r.push(e))}return r}(t);return undefined},clear:s,search:function(t){return t?function(e,n,r,i){const o=[];for(let t=0;t<e.length&&o.length<i.limit;t++){var u=function(t,e,n,r){for(const i in t)if(!function(n,r){for(let t=0,e=r.length;t<e;t++){var i=r[t];if(new RegExp(i).test(n))return!0}return!1}(t[i],r.exclude)&&n.matches(t[i],e))return t}(e[t],n,r,i);u&&o.push(u)}return o}(u,t,c.searchStrategy,c).sort(c.sort):[]},setOptions:function(t){c=t||{},c.fuzzy=t.fuzzy||!1,c.limit=t.limit||10,c.searchStrategy=t.fuzzy?e:r,c.sort=t.sort||a,c.exclude=t.exclude||[]}};function u(t){return c.ignoreLocation?t:t.replace(/^\/+/g,"")}function l(t){return Boolean(t)&&"[object Object]"===Object.prototype.toString.call(t)}function s(){return u.length=0,u}function p(t){return u.push(t),t}var c={};c.fuzzy=!1,c.limit=10,c.searchStrategy=c.fuzzy?e:r,c.sort=a,c.exclude=[];var a=function(){return 0};var m={load:function(t,e){const n=window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");n.open("GET",t,!0),n.onreadystatechange=function(){if(4===n.readyState&&200===n.status)try{e(JSON.parse(n.responseText))}catch(t){e(null)}},n.send()}};var d={templater:f,repository:o,store:m,searcher:o,options:{searchInput:null,resultsContainer:null,json:[],success:Function.prototype,searchResultTemplate:'<li><a href="{url}" title="{desc}">{title}</a></li>',templateMiddleware:Function.prototype,sortMiddleware:function(){return 0},noResultsText:"No results found",limit:10,fuzzy:!1,exclude:[]},utils:{merge:function(r,i){for(var t in i)try{r[t]=i[t].constructor===Object?d.utils.merge(r[t],i[t]):i[t]}catch(t){r[t]=i[t]}return r},isJSON:function(t){try{return!!(t instanceof Object&&JSON.parse(JSON.stringify(t)))}catch(t){return!1}}}};window.SimpleJekyllSearch=function(t){var n=d.utils.merge(d.options,t);function e(t){o.put(t),n.success(t)}d.templater.setOptions({template:n.searchResultTemplate,middleware:n.templateMiddleware}),d.repository.setOptions({fuzzy:n.fuzzy,limit:n.limit,sort:n.sortMiddleware,exclude:n.exclude}),d.utils.isJSON(n.json)?e(n.json):d.store.load(n.json,e);var r={search:function(t){var e=d.repository.search(t);return e.length&&e.forEach(function(t){e[e.indexOf(t)]=d.templater.compile(t)}),function(t,e){var n=t.length;if(0===n)return f();for(var r=0;r<n;r++)t[r].innerHTML=e[r]}(n.resultsContainer,e),e}};return n.searchInput&&n.searchInput.addEventListener("input",function(t){!function(t){return!(!t||0===t.length)}(t.target.value)&&r.search(t.target.value).length&&function(t){n.resultsContainer.innerHTML=n.noResultsText}}()),r};function f(){n.resultsContainer&&(n.resultsContainer.innerHTML="")}}();